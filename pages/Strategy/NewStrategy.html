
<!DOCTYPE html>
<html style="height: 100%;width:100%">
<head style="height: 100%;width:100%">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>UMT - 自定义策略</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <link rel="icon" href="https://cdn.joinquant.com/common/img/favicon-16-16.png?v=2" type="image/x-icon">
    <!-- Bootstrap 3.3.6 -->
    <link rel="stylesheet" href="../../bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="../../dist/css/AdminLTE.min.css">
    <!-- iCheck -->
    <link rel="stylesheet" href="../../plugins/iCheck/square/blue.css">
    <link rel="stylesheet" href="../../bootstrap/css/layui.css" media="all">
    <link rel="stylesheet" href="../../bootstrap/css/global.css" media="all">


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <style type="text/css">
        /**{margin: 0; padding: 0;}*/
        /*html,body{height: 100%; margin: 0; padding: 0;font: 12px/1.5 tahoma, arial, 'hiragino sans gb', 'microsoft yahei', sans-serif;-webkit-font-smoothing: antialiased;}*/
        /*#mian{ width:540px; height:100%; }*/
        /*#leftBox{background:#ecf0f5;width:15px; height:100%; text-align:left;float:left;}*/
        /*#test{border:6px solid #eaeaea; outline:none; width:530px; height:100%; resize: none; background: rgb(250,250,250); line-height: 24px;font-size: 14px;float: left; padding:10px 8px;  color: black; font-family: inherit; box-sizing: border-box;}*/
        /*#leftNum{ height:100%; width: 100%; resize: none;outline:none; overflow-y: hidden; overflow-x: hidden; border: 0; background: rgb(247,247,247); color: #999;line-height: 24px;font-size: 14px; padding:10px 4px; text-align: right; font-weight: bold; box-sizing: border-box;}*/
        /*#result{width:400px;height:500px;}*/
        /*#pic{width:600px;height: 50%;border:1px solid black;}*/
        /*#log{width:600px;height:50%}*/


        /*saveArea { margin:0px;padding:0px;text-align: center;}*/
        /*#hidebg { position:absolute;left:0px;top:0px;*/
            /*background-color:#000;*/
            /*width:100%;  !*宽度设置为100%，这样才能使隐藏背景层覆盖原页面*!*/
            /*filter:alpha(opacity=60);  !*设置透明度为60%*!*/
            /*opacity:0.6;  !*非IE浏览器下设置透明度为60%*!*/
            /*display:none; !* http://www.jb51.net *!*/
            /*z-Index:2;*/
        /*}*/
        /*#saveBody { position:absolute;width:400px;height:180px;top:200px;left:35%;background-color:#fff;display:none;cursor:pointer;z-Index:3;}*/


        saveArea { margin:0px;padding:0px;text-align: center;}
        #hidebg { position:absolute;left:0px;top:0px;
            background-color:#000;
            width:100%;  /*宽度设置为100%，这样才能使隐藏背景层覆盖原页面*/
            filter:alpha(opacity=60);  /*设置透明度为60%*/
            opacity:0.6;  /*非IE浏览器下设置透明度为60%*/
            display:none; /* http://www.jb51.net */
            z-Index:2;}
        #saveBody { position:absolute;width:400px;height:100px;top:200px;left:35%;background-color:#fff;display:none;cursor:pointer;z-Index:3;}


        #main{color:#666}
        textarea{border:1px solid #7f9db9;font-size:9pt;width:100%;height:auto;color:#000}
        .grey{color:#999}
        #msg1,#msg2,#msg3,#msg4{ display:none}
        #ol{position:absolute;z-index:1;padding:0px;margin:0px;border:0px;background:#ecf0f5;width:3%;height:100%;text-align:left; }
        #li{background:#ecf0f5;height:160px;overflow:hidden;width:100%;height:100%;border-right:0;line-height:20px;margin:0px;padding:0px;text-align:center}
        #c2{font-family:Arial, Helvetica, sans-serif;font-size:20px;height:160px; margin:0px; width:100%;height:100%;padding:0 0 0 35px;overflow-x: hidden;line-height:20px;}

        #page-demo .breadcrumb{height:24px;height:1.5rem;padding:6.4px 16px;padding:.4rem 1rem;background:#f2f2f2}#page-demo .breadcrumb ul li{float:left}#page-demo .breadcrumb .algorithm-name{margin:0 0 0 8px;margin:0 0 0 .5rem;height:24px;height:1.5rem;line-height:24px;line-height:1.5rem;padding:0 8px;padding:0 .5rem;border-radius:5px;max-width:400px;max-width:25rem;font-size:12.8px;font-size:.8rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:400}#page-demo .breadcrumb .algorithm-name-edit{max-width:480px;max-width:30rem;text-align:center;z-index:2}#page-demo .breadcrumb .algorithm-desc{position:relative;margin:0 0 0 8px;margin:0 0 0 .5rem;padding:0 8px;padding:0 .5rem;height:24px;height:1.5rem;line-height:24px;line-height:1.5rem;border-radius:.2rem;font-weight:400;font-size:11.2px;font-size:.7rem}#page-demo .breadcrumb .algorithm-desc .desc{padding:0 3.2px;padding:0 .2rem;display:inline-block;position:relative;margin-left:3.2px;margin-left:.2rem;height:16px;height:1rem}#page-demo .breadcrumb .algorithm-desc:hover{background:#fff}#page-demo .breadcrumb .algorithm-desc-edit{top:0;left:-32px;left:-2rem;padding:0 32px;padding:0 2rem}#page-demo .breadcrumb .algorithm-desc .rqicon{position:relative;z-index:1}#page-demo .breadcrumb .algorithm-desc .desc-close{position:absolute;top:-2px;right:3.2px;right:.2rem;font-size:10px}#page-demo .breadcrumb>span{padding:0 8px;padding:0 .5rem;font-size:12px;line-height:24px;line-height:1.5rem}#page-demo .breadcrumb>a{line-height:24px;line-height:1.5rem;font-size:12.8px;font-size:.8rem}#page-demo .breadcrumb .btn-mini{border-right-width:0}#page-demo .breadcrumb .border-right{border-right-width:1px}#page-demo .breadcrumb .type-0,#page-demo .breadcrumb .type-java,#page-demo .breadcrumb .type-Java{color:#c00}#page-demo .breadcrumb .type-1,#page-demo .breadcrumb .type-python,#page-demo .breadcrumb .type-Python{color:#3777ad}#page-demo .toolbar{height:24px;height:1.5rem;padding:6.4px 12px 5.6px;padding:.4rem .75rem .35rem;background-color:#fff;border-bottom:1px solid #999}#page-demo #editor-box{border-top:1px solid #ccc;position:absolute;top:84.8px;top:5.3rem;bottom:1px;left:0;right:0}#page-demo #editor-box.no-plot #build-wrapper{height:226px}#page-demo #editor-box.no-plot #log-wrapper{height:calc(100vh - 226px - 5.35rem)}#page-demo #editor-wrapper{position:relative;height:100%;width:50%}#page-demo #editor-wrapper .yellow-arrow{position:absolute;right:80px;right:5rem;top:4.8px;top:.3rem;z-index:3;height:28.8px;height:1.8rem;width:48px;width:3rem}#page-demo #editor-wrapper .toolbar{text-align:right;padding-right:10px}#page-demo #editor-wrapper .btn{margin-right:12px;margin-right:.75rem}#page-demo #editor-wrapper .settings{display:inline-block;margin-right:15px;top:-2px}#page-demo #editor-wrapper .rqicon{font-size:14.4px;font-size:.9rem;color:#999}#page-demo #editor-wrapper .rqicon:hover{color:#5584ff}#page-demo #sep-control{position:absolute;right:0;top:0;bottom:0;width:8px;background-color:#fff;border-left:1px solid #333;border-right:1px solid #333}#page-demo #editor{position:absolute;top:36.8px;top:2.3rem;left:0;right:10px;bottom:0;margin:0}#page-demo #build-wrapper,#page-demo #log-wrapper{position:relative}#page-demo #build-wrapper{height:424px;overflow:hidden}#page-demo #build-wrapper .yellow-arrow{position:absolute;right:80px;right:5rem;top:3.2px;top:.2rem}#page-demo #build-wrapper input{height:24px;height:1.5rem;line-height:24px;line-height:1.5rem;padding:0 5px;width:80px;width:5rem;border:0;background:#f2f2f2;color:#999}#page-demo #build-wrapper .tip{position:absolute;color:#fc6;font-size:32px;font-size:2rem;top:5px;right:65.6px;right:4.1rem}#page-demo #build-wrapper .select{width:56px;width:3.5rem;line-height:22.4px;line-height:1.4rem;vertical-align:top}#page-demo #build-wrapper .select-trigger{border:1px solid #ccc}#page-demo #build-wrapper .select li{height:23.2px;height:1.45rem}#page-demo #build-wrapper .select li:last-child{height:24px;height:1.5rem}#page-demo #build-wrapper .select.active .select-sheet{height:49.6px;height:3.1rem;border-width:1px}#page-demo #build-wrapper #explain{color:#ccc;font-size:12.8px;font-size:.8rem;margin-top:4.8px;margin-top:.3rem}#page-demo #build-wrapper #explain span:first-child{position:relative;left:41.6px;left:2.6rem}#page-demo #build-wrapper #explain span:nth-child(2){position:relative;left:88px;left:5.5rem}#page-demo #build-wrapper #explain span:nth-child(3){position:relative;left:124.8px;left:7.8rem}#page-demo #build-wrapper #explain span:nth-child(4){position:relative;left:145.6px;left:9.1rem}#page-demo #build-result{position:absolute;top:36.8px;top:2.3rem;left:0;right:0;bottom:0}#page-demo #build-result>p{position:absolute;top:50%;left:50%;margin-top:-15px;margin-left:-150px;font-size:19.2px;font-size:1.2rem;height:30px;line-height:30px;width:300px;text-align:center;color:#ccc}#page-demo #log-wrapper{overflow:hidden;height:55%}#page-demo #log-wrapper .tab-nav{height:35px;border-top:1px solid #999;border-bottom:1px solid #ccc;background-color:#f2f2f2}#page-demo #log-wrapper .tab-nav a{display:block;height:28px;line-height:28px;margin:6px 0 0 15px;padding:1px 16px 0;color:#999}#page-demo #log-wrapper .tab-nav .active{height:29px;padding:0 15px;border:1px solid #ccc;border-bottom:0;border-radius:5px 5px 0 0;color:#5584ff;background-color:#fff}#page-demo #log-wrapper .tab-nav .new-log:after{content:"";display:block;height:8px;width:8px;background-color:#e55;border-radius:4px;position:relative;top:-18px;left:-10px}#page-demo #log-wrapper .tab-nav .active.new-log:after{display:none}#page-demo #log-wrapper .tab-sheet{overflow-y:auto;box-sizing:border-box;height:calc(100% - 37px);background:#fff;color:#333}#page-demo #log-wrapper .theme-dark{background-color:#323232;color:#fff}#page-demo #log-wrapper .theme-dark.loading:after{background-image:url(//alicdn.ricequant.com/img/loading-cat-black-957f3edcd9.gif)}#page-demo #log-box p{font-size:19.2px;font-size:1.2rem;text-align:center;color:#ccc;margin-top:128px;margin-top:8rem}#page-demo #err-box p{font-size:19.2px;font-size:1.2rem;text-align:center;color:#ccc;margin-top:128px;margin-top:8rem}#page-demo footer{display:none}#page-demo .join-us-bg{position:fixed;top:0;bottom:0;left:0;right:0;background:hsla(0,0%,78%,.5);z-index:3}#page-demo .join-us-box{position:absolute;top:50%;left:50%;margin-top:-200px;margin-top:-12.5rem;margin-left:-313.6px;margin-left:-19.6rem}#page-demo .join-us-box,#page-demo .join-us-box img{height:400px;height:25rem;width:628px;width:39.25rem}#page-demo .join-us-box a{position:absolute;height:47.2px;height:2.95rem;bottom:52.8px;bottom:3.3rem}#page-demo .join-us-box .register-btn{left:190.4px;left:11.9rem;width:128px;width:8rem}#page-demo .join-us-box .login-btn{right:163.2px;right:10.2rem;width:123.2px;width:7.7rem}#page-demo .join-us-box .cancel-btn{height:16px;height:1rem;width:16px;width:1rem;top:105.6px;top:6.6rem;right:14.4px;right:.9rem}


    </style>

</head>
<body class="hold-transition login-page" style="height: 100%;width:100%;" onLoad="keyUp();">

<div id="saveArea">
    <div id="hidebg"></div>
    <form class="form-horizontal">
            <div id="saveBody" class="box-body">

                <div class="" style="text-align: center">
                    <!--<span class="label label-primary label-lg">请输入策略名称：</span>-->
                    <label>请输入策略名称</label>
                    <input type="text" id="strategyname" class="" placeholder="在这里输入策略名称">
                </div>
                <div class="btn-group" style="">
                    <button type="button" class="btn btn-primary" @click="saveCode">保存</button>
                    <button type="button" class="btn btn-primary" onclick="hide()">取消</button>
                </div>

            </div>
        </form>
</div>

<div class="layui-header header header-index" >
    <div class="layui-main">
        <a class="logo" href="../../pages/Init.html" style="font-family: '等线 Light';font-size: large;color: #f1f1f1;" >
            UMT
        </a>
        <ul class="layui-nav" pc>
            <li class="layui-nav-item ">
                <a href="../../pages/Homepage.html">首页</a>
            </li>
            <li class="layui-nav-item ">
                <a href="../../pages/SingleStock.html">个股</a>
            </li>
            <li class="layui-nav-item" pc>
                <a href="../Strategy.html" target="_blank">量化策略</a>
            </li>
            <li class="layui-nav-item">
                <a href="../Strategy/NewStrategy.html" target="_blank">自定义策略</a>
            </li>
            <li class="layui-nav-item" >
                <a href="javascript:;">个性化</a>
                <dl class="layui-nav-child">
                    <dd><a href="../../pages/个性化/PersonnalDevice.html" target="_blank">我的信息</a></dd>
                    <dd><a href="../../pages/个性化/History.html" target="_blank">浏览记录</a></dd>
                    <dd><a href="../../pages/个性化/MyChosenStock.html" target="_blank">我的自选股</a></dd>
                    <dd><a href="../../pages/个性化/MyStrategy.html" target="_blank">我的策略</a> </dd>
                </dl>
            </li>
            <li class="layui-nav-item">
                <a href="../../pages/Login.html" target="_blank">登录</a>
            </li>

        </ul>
    </div>
</div>

&nbsp;&nbsp;&nbsp;
<div class="page-header">
    <h1 style="color:#FFFFFF;font-size: 30px;"><strong>&nbsp;&nbsp;&nbsp;一个简单的策略</strong></h1>
</div>

<div class="" id="app" style="height: 100%;width:100%">
    <!--<div class="breadcrumb">-->
        <!--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-->
        <!--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-->
        <!--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-->
        <!--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-->
        <!--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-->
        <!--<label style="font-size: 17px;color: darkblue">参数选择</label>-->

        <!--&nbsp;从&nbsp;<input id="datepicker" type="text" placeholder="请选择起始日期"  style="width:110px;height:20px;text-align:center" readonly>-->
        <!--&nbsp;至&nbsp;<input id="datepicker2" type="text" placeholder="请选择结束日期"  style="width:110px;height:20px;text-align:center" readonly>-->
        <!--&nbsp;¥&nbsp;<input type="text" value="100000" >-->
        <!--<select name="" style="width:60px;height:22px">-->
            <!--<option value="0">每天</option>-->
            <!--<option value="1">分钟</option>-->
        <!--</select>-->
        <!--<button class="btn btn-success btn-sm pull-right">保存</button>-->
        <!--<button class="btn btn-success btn-sm pull-right" @click="runCode">编译运行</button>-->
    <!--</div>-->


    <div class="well well-sm">
        <span class="label label-primary label-lg">参数选择</span>
        &nbsp;从&nbsp;<input id="datepicker" type="text" placeholder="请选择起始日期"  style="width:110px;height:20px;text-align:center" readonly>
        &nbsp;至&nbsp;<input id="datepicker2" type="text" placeholder="请选择结束日期"  style="width:110px;height:20px;text-align:center" readonly>
        &nbsp;¥&nbsp;<input id="moneyInput" type="text" value="100000" >
        <select name="" style="width:60px;height:22px">
            <option value="0">每天</option>
            <option value="1">分钟</option>
        </select>
        <button class="btn btn-primary btn-sm pull-right" onclick="save()">保    存</button>
        <button class="btn btn-primary btn-sm pull-right" @click="runCode">编译运行</button>
    </div>



    <div class="container" style="height: 100%;width:100%">

        <div class="row"  style="height: 100%;width:100%">
            <div class="col-md-6" style="height: 100%;width:50%">
                <div class="panel panel-default" style="height:100%;">
                    <div id="ol"><textarea cols="10" rows="10" id="li" disabled></textarea></div>
                    <textarea v-model="message" spellcheck="false"  style="background-color:black;color:lightskyblue;" class="form-control" name="co" cols="60" rows="10" wrap="off" id="c2" onblur="check('2')" onKeyUp="keyUp()" onscroll="G('li').scrollTop=this.scrollTop;" oncontextmenu="return false">
                        <!--删除了属性onFocus="clearValue('2')"-->
                    </textarea>
                </div>
                <!--<table width="100%"  border="0" cellspacing="0" cellpadding="0" style="position:relative;height:100%">-->
                    <!--<tr>-->
                        <!--<td width="100%">-->
                            <!--<div id="ol"><textarea cols="10" rows="10" id="li" disabled></textarea></div>-->
                            <!--<textarea v-model="message" name="co" cols="60" rows="10" wrap="off" id="c2" onblur="check('2')" onKeyUp="keyUp()" onFocus="clearValue('2')" onscroll="G('li').scrollTop=this.scrollTop;" oncontextmenu="return false" class="grey">-->

                            <!--</textarea>-->
                        <!--</td>-->
                    <!--</tr>-->
                <!--</table>-->
            </div>

            <div class="col-md-6" style="height: 100%;width:50%">
                <div class="row" style="height:50%">
                    <div class="panel panel-default" style="height:100%">
                        <div class="panel-body" style="height:100%;width: 100%">
                        <!--<img src="../../dist/img/运行截图.png" style="max-width: 100%;max-height: 100%;">-->
                            <fieldset style="height: 100%;width:100%">
                                <legend>Console</legend>
                                <div class="bs-component" style="height: 100%;width:100%">
                                    <textarea v-model="result" id="result" class="form-control" style="height:86%;width: 100%;font-size:18px">{{ result }}</textarea>
                                </div>
                            </fieldset>
                        </div>

                    </div>
                </div>
                <div class="row" style="height:50%">

                    <div class="panel panel-default" style="height:100%;">
                        <div class="tabbable" style="height:100%;"> <!-- Only required for left/right tabs -->
                            <ul class="nav nav-tabs">
                                <li class="active" id="logtab"><a href="#tab1" data-toggle="tab">日志</a></li>
                                <li class="" id="errortab"><a href="#tab2" data-toggle="tab">运行时错误</a></li>
                            </ul>
                            <div class="tab-content" style="height:100%;width:100%">
                                <div class="tab-pane active" id="tab1" style="height:85%;width:100%">
                                    <textarea style="height:100%;width:100%;font-size:16px">{{log}}</textarea>
                                </div>
                                <div class="tab-pane" id="tab2" style="height:85%;width:100%">
                                    <!--<p style="font-size: 18px">{{runerror}}</p>-->
                                    <textarea style="height:100%;width:100%;font-size:16px">{{runerror}}</textarea>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

</div>



<!-- /.login-box -->
<script src="//res.layui.com/layui/build/layui.js?t=1496845305865" charset="utf-8"></script>
<script>
    layui.config({
        base: '//res.layui.com/lay/modules/layui/'
        ,version: '1496845305865'
    }).use('global');

    window.global = {
        preview: function(){
            var preview = document.getElementById('LAY_preview');
            return preview ? preview.innerHTML : '';
        }()
    };
</script>


<script src="../../vue/vue.js"></script>
<script src="../../vue-resource/vue-resource.js"></script>
<script>
    var vm = new Vue({
        el: '#app',
        data: {
            message: "" +
            "import cn.edu.nju.p.po.StockPO;\n" +
            "import cn.edu.nju.p.utils.StockHelper;\n" +
            "import cn.edu.nju.p.utils.beans.ToolSpring;\n" +
            "import cn.edu.nju.p.utils.redis.StockRedisDataUtils;\n" +
            "import cn.edu.nju.p.strategy.StrategyRunner;\n" +
            "import cn.edu.nju.p.strategy.Strategy;\n" +
            "\n" +
            "import java.math.BigDecimal;\n" +
            "import java.time.LocalDate;\n" +
            "import java.util.ArrayList;\n" +
            "import java.util.LinkedHashMap;\n" +
            "import java.util.List;\n" +
            "import java.util.Map;\n" +
            "import java.util.stream.Collectors;\n" +
            "\n" +
            "public class MomentumStrategy2Impl implements Strategy {\n" +
            "\n" +
            "    private StockHelper stockHelper;\n" +
            "    private StockRedisDataUtils redisDataUtils;\n" +
            "    private int holdingDayNum;\n" +
            "    private int formativeDayNum;\n" +
            "    private LocalDate beginDate;\n" +
            "    private LocalDate endDate;\n" +
            "\n" +
            "    public MomentumStrategy2Impl() {\n" +
            "        this.stockHelper = ToolSpring.getBeans(StockHelper.class);\n" +
            "        this.redisDataUtils = ToolSpring.getBeans(StockRedisDataUtils.class);\n" +
            "        this.holdingDayNum = 5;\n" +
            "        this.formativeDayNum = 5;\n" +
            "        this.beginDate = LocalDate.of(2016,5,10);\n" +
            "        this.endDate = LocalDate.of(2016, 7, 10);\n" +
            "    }\n" +
            "\n" +
            "    @Override\n" +
            "    public List<String> setStockPool() {\n" +
            "        return stockHelper.getRecommendStock();\n" +
            "    }\n" +
            "\n" +
            "    @Override\n" +
            "    public List<String> setWinner(LocalDate beginDate, LocalDate endDate, List<String> stockPool) {\n" +
            "\n" +
            "        Map<String, Double> fieldRates = new LinkedHashMap<>();\n" +
            "        stockPool.forEach(stockCode -> fieldRates.put(stockCode,countRate(beginDate,endDate,stockCode)));\n" +
            "\n" +
            "        //对收益率进行排序\n" +
            "        List<Map.Entry<String, Double>> rateList = new ArrayList<>(fieldRates.entrySet());\n" +
            "        rateList.sort((rate1, rate2) -> new BigDecimal(rate2.getValue()).compareTo(new BigDecimal(rate1.getValue())));\n" +
            "\n" +
            "        int winnerNum = rateList.size() / 5;\n" +
            "        return rateList.subList(0,winnerNum)\n" +
            "                .parallelStream()\n" +
            "                .map(Map.Entry::getKey)\n" +
            "                .collect(Collectors.toList());\n" +
            "    }\n" +
            "\n" +
            "    private double countRate(LocalDate beginDate, LocalDate endDate, String stockCode) {\n" +
            "\n" +
            "        try {\n" +
            "            StockPO beginPo = redisDataUtils.getStockPO(stockCode, beginDate);\n" +
            "            StockPO endPo = redisDataUtils.getStockPO(stockCode, endDate);\n" +
            "            double beginClose = beginPo.getClose();\n" +
            "            double endClose = endPo.getClose();\n" +
            "            return (endClose - beginClose) / beginClose;\n" +
            "        } catch (NullPointerException ne) {\n" +
            "            return -99;\n" +
            "        }\n" +
            "    }\n" +
            "    @Override\n" +
            "    public LocalDate setBeginDate() {\n" +
            "        return beginDate;\n" +
            "    }\n" +
            "\n" +
            "    @Override\n" +
            "    public LocalDate setEndDate() {\n" +
            "        return endDate;\n" +
            "    }\n" +
            "\n" +
            "    @Override\n" +
            "    public int setHoldingDay() {\n" +
            "        return holdingDayNum;\n" +
            "    }\n" +
            "\n" +
            "    @Override\n" +
            "    public int setFormativeDayNum() {\n" +
            "        return formativeDayNum;\n" +
            "    }\n" +
            "\n" +
            "    public static void main(String args[]){\n" +
            "        StrategyRunner.run(new MomentumStrategy2Impl());\n" +
            "}\n" +
            "}",
            result:"这里显示运行结果",
            runerror:"这里显示运行时错误",
            log:"这里显示日志",
            beginDate:"",
            endDate:"",
            money:"",
            strategyName:"",
        },
        methods:{
            runCode:function () {
                const self=this;
                self.beginDate=document.getElementById("datepicker").value;
                self.endDate=document.getElementById("datepicker2").value;
                self.money=document.getElementById("moneyInput").value;
                var begin=new Date(self.beginDate);
                var end=new Date(self.endDate);
                if(self.beginDate==""&&self.endDate==""){
                    alert("请选择开始日期和结束日期");
                    return;
                }else if(self.beginDate==""){
                    alert("请选择开始日期");
                    return;
                } else if(self.endDate==""){
                    alert("请选择结束日期");
                    return;
                }else if(begin.getTime()>end.getTime()) {
                    alert("日期选择不当，起始日期应在结束日期之前！");
                    return;
                }else if(self.money=="") {
                    alert("请选择回测资金");
                    return;
                }
                this.$http.get("http://localhost:8080/customstrategy",{
                    params:{
                        code:self.message
                    }
                }).then(function(response){
                      var check=response.data.errorCode;
                      if(check!=0){
                          self.runerror=response.data.data;
                          self.result="您的代码有错误，请检查";
                          var now=new Date()
                          self.log=self.log+"\n"+(1900+now.getYear()+"-"+(now.getMonth()+1)+"-"+now.getDate()+" "+now.getHours()+":"+now.getMinutes()+":"+now.getSeconds()+"运行失败");
                          document.getElementById("logtab").setAttribute("class","");
                          document.getElementById("errortab").setAttribute("class","active");
                          document.getElementById("tab1").setAttribute("class","tab-pane");
                          document.getElementById("tab2").setAttribute("class","tab-pane active");
                      }else{
                          self.result=response.data.data;
                          var now=new Date()
                          self.log=self.log+"\n"+(1900+now.getYear()+"-"+(now.getMonth()+1)+"-"+now.getDate()+" "+now.getHours()+":"+now.getMinutes()+":"+now.getSeconds()+"运行成功");
                          self.runerror="这里显示运行时错误";
                          document.getElementById("logtab").setAttribute("class","active");
                          document.getElementById("errortab").setAttribute("class","");
                          document.getElementById("tab1").setAttribute("class","tab-pane active");
                          document.getElementById("tab2").setAttribute("class","tab-pane");
                      }
                    }).catch(function(error){
                    alert("出现了未知的错误！请重新进行输入")
                })
            },

            saveCode:function () {
                alert( );
            }
        }
    });
</script>

<script src="../../plugins/jedate/jedate.js"></script>

<script type="text/javascript">
    var datepickerOptions = {
        dateCell:"#datepicker", //目标元素。由于jedate.js封装了一个轻量级的选择器，因此dateCell还允许你传入class、tag这种方式 '#id .class'
        format:"YYYY-MM-DD", //日期格式
        minDate:"1900-01-01 00:00:00", //最小日期
        maxDate:"2099-12-31 23:59:59", //最大日期
//                            skinCell:"jedateblue",
        isinitVal:false, //是否初始化时间
        isTime:true, //是否开启时间选择
        isClear:true, //是否显示清空
        festival:false, //是否显示节日
        zIndex:999,  //弹出层的层级高度
        marks:null, //给日期做标注
        choosefun:function(val) {},  //选中日期后的回调
        clearfun:function(val) {},   //清除日期后的回调
        okfun:function(val) {}       //点击确定后的回调
    };
    jeDate(datepickerOptions);
</script>

<script type="text/javascript">
    var datepickerOptions = {
        dateCell:"#datepicker2", //目标元素。由于jedate.js封装了一个轻量级的选择器，因此dateCell还允许你传入class、tag这种方式 '#id .class'
        format:"YYYY-MM-DD", //日期格式
        minDate:"1900-01-01 00:00:00", //最小日期
        maxDate:"2099-12-31 23:59:59", //最大日期
//                            skinCell:"jedateblue",
        isinitVal:false, //是否初始化时间
        isTime:true, //是否开启时间选择
        isClear:true, //是否显示清空
        festival:false, //是否显示节日
        zIndex:999,  //弹出层的层级高度
        marks:null, //给日期做标注
        choosefun:function(val) {},  //选中日期后的回调
        clearfun:function(val) {},   //清除日期后的回调
        okfun:function(val) {}       //点击确定后的回调
    };
    jeDate(datepickerOptions);
</script>


<script src="../../js/NewStrategy.js"></script>


<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_30088308'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "w.cnzz.com/c.php%3Fid%3D30088308' type='text/javascript'%3E%3C/script%3E"));</script>
<!-- jQuery 2.2.3 -->
<script src="../../plugins/jQuery/jquery-2.2.3.min.js"></script>
<!-- Bootstrap 3.3.6 -->
<script src="../../bootstrap/js/bootstrap.min.js"></script>
<!-- iCheck -->
<script src="../../plugins/iCheck/icheck.min.js"></script>
<script>
    $(function () {
        $('input').iCheck({
            checkboxClass: 'icheckbox_square-blue',
            radioClass: 'iradio_square-blue',
            increaseArea: '20%' // optional
        });
    });
</script>


</body>
</html>
